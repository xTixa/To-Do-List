:root{
  --bg:#0b1220; --card:#111a2b; --text:#eaf0ff; --muted:#a9b6d3; --line:#1e2a44;
  --brand:#4f8cff; --ok:#25c59a; --warn:#ffb020; --danger:#ff5d5d; --shadow:0 10px 30px rgba(0,0,0,.25);
}
*{box-sizing:border-box}
html,body{height:100%}
body{ margin:0; font:16px/1.5 system-ui,Segoe UI,Roboto,Ubuntu,Arial,sans-serif; background:var(--bg); color:var(--text); }
body.light{
  --bg:#f6f8fb; --card:#ffffff; --text:#0b1220; --muted:#5b6b88; --line:#e6ebf5; --brand:#2257ff; --ok:#0e9d7a; --warn:#b57400; --danger:#e23b3b;
}

/* icons */
i.bi{ line-height:1; vertical-align:-0.125em; }

/* input/select com ícone à esquerda */
.input-wrap, .select-wrap{ position:relative; display:flex; align-items:center; }
.input-wrap i, .select-wrap i{
  position:absolute; left:10px; pointer-events:none; opacity:.8;
}
.input-wrap .input, .select-wrap .select{ padding-left:34px; }

.app{ display:grid; grid-template-columns: 300px 1fr; min-height:100vh; }

/* NAV */
.nav{ border-right:1px solid var(--line); display:flex; flex-direction:column; padding:16px; gap:16px; transition: transform .2s ease, box-shadow .2s ease; background: var(--bg); }
.bar{ display:flex; align-items:center; justify-content:space-between; }
.bar-actions{ display:flex; align-items:center; gap:8px; }
.logo{ margin:0; font-size:22px; font-weight:800; letter-spacing:.5px; }

.nav-menu{ display:flex; flex-direction:column; gap:8px; }
.nav-btn{
  display:flex; align-items:center; justify-content:space-between; width:100%; padding:10px 12px;
  background:transparent; color:var(--text); border:1px solid var(--line); border-radius:12px; cursor:pointer;
}
.nav-btn span{ display:flex; align-items:center; gap:8px; }
.nav-btn:hover{ background:var(--card) }

.num{ font-size:12px; padding:2px 8px; border-radius:999px; background:var(--line); color:var(--muted); }
.rule{ height:1px; background:var(--line); }

.lists{ display:flex; flex-direction:column; gap:12px; flex:1; overflow:auto; }
.lists-head{ display:flex; align-items:center; justify-content:space-between; }
.lists-title{ margin:0; font-size:14px; color:var(--muted); text-transform:uppercase; letter-spacing:.1em; }
.list-groups{ display:flex; flex-direction:column; gap:8px; }

/* categoria */
.list-item{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  padding:8px 10px; border:1px solid var(--line); border-radius:10px; cursor:pointer;
}
.list-item:hover{ background:var(--card) }
.list-name{ display:flex; align-items:center; gap:8px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:180px; }
.list-name i{ opacity:.9; }
.list-actions{ display:flex; gap:6px; }
.list-actions .icon-btn{ border:none; background:transparent; cursor:pointer; font-size:16px; color:var(--muted); }
.list-actions .icon-btn:hover{ color:var(--text); }

.foot{ margin-top:auto; }
.credit{ color:var(--muted); text-decoration:none; display:inline-flex; align-items:center; gap:8px; }
.credit:hover{ text-decoration:underline; }

/* CONTENT */
.content{ padding:20px 24px; display:flex; flex-direction:column; gap:14px; }
.toolbar{ display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; }
.toolbar-left{ display:flex; align-items:center; gap:10px; }
.view{ margin:0; }
.count{ padding:4px 10px; border-radius:999px; background:var(--line); color:var(--muted); font-size:12px; }

.toolbar-right{ display:flex; gap:8px; flex-wrap:wrap; }
.input, .select{
  height:40px; padding:0 12px; border:1px solid var(--line); background:var(--card); color:var(--text); border-radius:10px; outline:none;
}
.input::placeholder{ color:var(--muted) }
.grow{ flex:1; min-width:200px; }

.btn{
  height:40px; padding:0 14px; border-radius:10px; border:1px solid var(--line);
  background:var(--brand); color:#fff; cursor:pointer; box-shadow:var(--shadow);
}
.btn:hover{ filter:brightness(1.05) }
.btn-ghost{ background:transparent; color:var(--text); border:1px solid var(--line); }
.btn-small{ height:32px; padding:0 10px; }
.btn-icon{ height:40px; width:40px; display:grid; place-items:center; border-radius:12px; background:var(--card); border:1px solid var(--line); }

/* ADD */
.add-box{ display:flex; gap:8px; align-items:center; }

/* TASKS */
.tasks{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px; }
.task{
  display:grid; grid-template-columns: 28px 1fr auto; gap:10px; align-items:center;
  background:var(--card); border:1px solid var(--line); border-radius:14px; padding:10px 12px;
}
.task.dragging{ opacity:.6; outline:2px dashed var(--brand); }
.mark{ width:20px; height:20px; }
.task-text{ display:flex; flex-direction:column; gap:2px; }
.task-row{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.task-name{ font-weight:600; }
.task-name.done{ text-decoration:line-through; color:var(--muted); }
.task-meta{ font-size:12px; color:var(--muted); display:flex; gap:10px; }
.task-meta i{ opacity:.9; margin-right:4px; }

.chip{ padding:2px 8px; border-radius:999px; background:var(--line); font-size:12px; }
.chip.high{ background:rgba(255,93,93,.15); color:var(--danger); border:1px solid rgba(255,93,93,.35); }
.chip.med{ background:rgba(255,176,32,.12); color:var(--warn); border:1px solid rgba(255,176,32,.35); }
.chip.low{ background:rgba(79,140,255,.12); color:var(--brand); border:1px solid rgba(79,140,255,.35); }
.chip.overdue{ background:rgba(255,93,93,.1); color:var(--danger); }
.chip.today{ background:rgba(37,197,154,.12); color:var(--ok); }

.task-actions{ display:flex; align-items:center; gap:6px; }
.icon-btn{ border:none; background:transparent; color:var(--muted); cursor:pointer; font-size:18px; padding:6px; border-radius:8px; display:grid; place-items:center; }
.icon-btn:hover{ color:var(--text); background:var(--line); }

/* MODALS */
.modal-content.modal-box{ background:var(--card); border:1px solid var(--line); color:var(--text); }
.modal-header, .modal-footer{ border-color: var(--line) !important; }
.modal-title{ margin:0; display:flex; align-items:center; gap:10px; }
.modal-actions{ display:flex; justify-content:flex-end; gap:8px; }
.btn-close{ filter: invert(1); }

.btn-danger{ background: var(--danger); border-color: var(--danger); color: #fff; }
.btn-danger:hover{ filter: brightness(1.05); }

.confirm-box{ max-width: 520px; }
.confirm-head{ display:flex; align-items:center; gap:12px; }
.confirm-icon{
  width:36px; height:36px; display:grid; place-items:center;
  border-radius:10px; background: rgba(255,93,93,.15); border:1px solid rgba(255,93,93,.35); font-size:18px;
}
.confirm-msg{ margin: 6px 0 0 0; color: var(--muted); }

/* Overlay */
.mask{ position: fixed; inset:0; background: rgba(0,0,0,.5); opacity:0; pointer-events:none; transition: opacity .2s ease; z-index:8; }
.mask.show{ opacity:1; pointer-events:auto; }

/* Sidebar colapsável */
#menuBtn{ display:none; }
@media (max-width: 900px){
  .app{ grid-template-columns: 1fr; }
  .nav{ position: fixed; inset: 0 auto 0 0; width: 80vw; max-width: 320px; transform: translateX(-102%); z-index: 9; box-shadow: var(--shadow); }
  .nav.open{ transform: translateX(0); }
  .content{ padding: 16px; }
  .bar{ gap: 8px; }
  #menuBtn{ display:inline-grid; }
}

/* Empilhar no mobile */
@media (max-width: 720px){
  .toolbar{ flex-direction: column; align-items: stretch; }
  .toolbar-right{ width:100%; }
  .add-box{ flex-wrap: wrap; }
  .grow{ min-width: unset; flex: 1 1 100%; }
}

/* Lista compacta em ecrã pequeno */
@media (max-width: 520px){
  .task{ grid-template-columns: 24px 1fr auto; padding: 10px; }
  .task-meta{ display:none; }
}
